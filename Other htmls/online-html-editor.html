<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online HTML Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Online HTML Editor</h1>
    </header>
    <main>
        <section id="editor">
            <h2>Editor</h2>
            <label for="html-input">HTML:</label>
            <textarea id="html-input" placeholder="Write your HTML here..."></textarea>

            <label for="css-input">CSS:</label>
            <textarea id="css-input" placeholder="Write your CSS here..."></textarea>

            <label for="js-input">JavaScript:</label>
            <textarea id="js-input" placeholder="Write your JavaScript here..."></textarea>

            <button id="add-html">Add More HTML</button>
            <button id="download">Download</button>
        </section>

        <section id="output">
            <h2>Output</h2>
            <iframe id="output-frame" title="Output Preview"></iframe>
        </section>
    </main>

    <script>
        const htmlInput = document.getElementById('html-input');
        const cssInput = document.getElementById('css-input');
        const jsInput = document.getElementById('js-input');
        const outputFrame = document.getElementById('output-frame');
        const downloadButton = document.getElementById('download');

        // Function to update output
        function updateOutput() {
            const html = htmlInput.value;
            const css = cssInput.value;
            const js = jsInput.value;

            const outputDocument = outputFrame.contentDocument || outputFrame.contentWindow.document;
            outputDocument.open();
            outputDocument.write(`
                <html>
                <head>
                    <style>${css}</style>
                </head>
                <body>
                    ${html}
                    <script>${js}</script>
                </body>
                </html>
            `);
            outputDocument.close();
        }

        // Event listeners
        htmlInput.addEventListener('input', updateOutput);
        cssInput.addEventListener('input', updateOutput);
        jsInput.addEventListener('input', updateOutput);

        // Download functionality
        downloadButton.addEventListener('click', function() {
            const htmlContent = htmlInput.value;
            const cssContent = cssInput.value;
            const jsContent = jsInput.value;

            const zip = new JSZip();
            zip.file('index.html', htmlContent);

            if (cssContent) {
                const cssFileName = prompt("Enter the name for your CSS file (without extension):", "styles") || "styles";
                zip.file(`${cssFileName}.css`, cssContent);
            }

            if (jsContent) {
                const jsFileName = prompt("Enter the name for your JavaScript file (without extension):", "script") || "script";
                zip.file(`${jsFileName}.js`, jsContent);
            }

            zip.generateAsync({ type: "blob" })
                .then(function(content) {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(content);
                    link.download = 'project.zip';
                    link.click();
                });
        });

        // Warn user on window close if there are unsaved changes
        window.onbeforeunload = function() {
            if (htmlInput.value || cssInput.value || jsInput.value) {
                return "All your progress will be gone. Are you sure you want to leave?";
            }
        };

        // Add more HTML button functionality
        document.getElementById('add-html').addEventListener('click', function() {
            const newHtml = prompt("Enter additional HTML:", "") || "";
            htmlInput.value += newHtml;
            updateOutput();
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</body>
</html>
